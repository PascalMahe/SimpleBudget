<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
	<h:head>
        <title>Appli Budget</title>
        <link rel="stylesheet" media="screen" href="../css/treeView.css" />
        <script type="text/javascript" src="../js/treeView.js"></script>

    </h:head>
	
	<h:body>
		<h1>Liste exhaustive des lignes de compte</h1>
		<ui:include page="menu.xhtml" />
		#TumbleWeed
		
        <h:form id="form">
        	<p:outputLabel value="#{bundle['labelSite']}" for="site" />
			<p:autoComplete id="site" value="#{searchController.site}" completeMethod="#{searchController.completeSite}" />
 			<br/>
 			<p:outputLabel value="#{bundle['labelDesi']}" for="desi" />
			<p:inputText id="desi" value="#{searchController.desi}" />
 			<br/>
 			<p:commandButton 	value="#{bundle['labelSearch']}" 
 								id="searchButton" 
 								actionListener="#{searchController.searchAction}" 
 								ajax="false" />
 								
 			<br/>
 			<br/>
 			
 			<p:dataTable var="line" value="#{searchController.listeLigne}" rendered="#{not empty searchController.listeLigne}">
			    <p:column headerText="#{bundle['headerCode']}">
			        <h:outputText value="#{line.id}" />
			    </p:column>
			 	<p:column headerText="#{bundle['headerCode']}">
			        <h:outputText value="#{line.date}" />
			    </p:column>
			 	<p:column headerText="#{bundle['headerCode']}">
			        <h:outputText value="#{line.mainLabel}" /><br/>
			        <h:outputText value="#{line.secondaryLabel}" />
			    </p:column>
			 	<p:column headerText="#{bundle['headerCode']}">
			        <h:outputText value="#{line.amount}" />
			    </p:column>
			 	<p:column headerText="#{bundle['headerCode']}">
			        <h:outputText value="#{line.recurring}" />
			    </p:column>
			 	<p:column headerText="#{bundle['headerCode']}">
			        <h:outputText value="#{line.category}" />
			    </p:column>
			 	
			    <ui:remove>
			    
				    <p:column headerText="">
				        <p:button outcome="edit" value="#{bundle['labelEdit']}">
						    <f:param name="code" value="#{mach.code}" />
						    <f:param name="site" value="#{mach.codeSite}" />
						</p:button>
						 
				    </p:column>
			    </ui:remove>
			</p:dataTable>
    	</h:form>
   	</h:body>
</html>